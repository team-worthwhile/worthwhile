// EXPECTED:VALID
function Integer[] buildArray(Integer length)
_ensures forall Integer i0, 0 <= i0 && i0 < length : _return[i0] = i0 + 1
{
Integer[] result
Integer i := 1
while (i <= length)
_invariant forall Integer i1, 0 <= i1 && i1 < i - 1 : result[i1] = i1 + 1
{
    result[i - 1] := i
i := i + 1
}
return result
}
Integer len := 100
Integer[] array := buildArray(len)
Integer sum := 0
Integer j := 0
while (j < len)
_invariant len = 100
_invariant array[j] = j + 1
_invariant sum = (j * (j + 1)) / 2
{
    sum := sum + array[j]
    j := j + 1
}
